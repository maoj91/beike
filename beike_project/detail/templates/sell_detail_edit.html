<!DOCTYPE HTML>
<html>

{% include "head.html" with title="我要卖—修改" %}

<body>
<div id="sell-edit" data-role="page" data-fullscreen="true">
    {% include "header.html" with title="我要卖—修改" %}

    <!-- TODO: needs to clean up -->
    <div>
        <div id="image_gallery">
            <div id="imgs">
            {% for image_metadata in image_list %}
                <span class="img_span">
                    <img src="{{ image_metadata.image_url }}">
                </span>
            {% endfor%}
            </div>
        </div>   
        <div id="image_thumbnails">
        {% for image_metadata in image_list %}
            <span class="thumbnail_span" id="thumbnail_span{{forloop.counter0}}" onclick='selectImage({{forloop.counter0}})'>
                <img src="{{ image_metadata.image_url }}">
            </span>
        {% endfor%}
        </div>
    </div>
    
    <div data-role="content">
        <form action="/detail/sell/{{post.id}}/save/" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-left">标题</div>
            <div class="form-right">
                <input type="text" name="title" id="title" value="{{post.title}}" data-rule-required="true" data-rule-content="true" data-msg-required="请输入标题" />
            </div>

            <div class="form-left">类别</div>
            <div class="form-right">
                <select class="form-button" name="category" id="category" data-placeholder="true">
                    {% for category in categories %}
                        {% if post.category.id == category.id %}
                            <option value={{ category.id }} selected>{{category.name}}</option>
                        {% else %}
                            <option value={{ category.id }}>{{category.name}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>

            <div class="form-left">价格</div>
            <div class="form-right">
                <input type="number" name="price" value="{{post.price}}" data-rule-required="true" data-rule-content="true" data-msg-required="请输入价格">
            </div>

            <div>
                <input type="hidden" name="latitude" id="buy_form_latitude"></input>
                <input type="hidden" name="longitude" id="buy_form_longitude"></input>
            </div>

            <!-- TODO: load zip from post -->
            <div class="form-left">邮编</div>
            <div class="form-right">
                <div style="width: 65px; float: left;">
                    <input type="text" name="zipcode" id="sell_form_zipcode" placeholder="zipcode" data-rule-required="true" data-rule-content="true" data-msg-required="输入zipcode并按修改">
                </div>
                <div style="width: 100px; float: right;">
                    <a href="" class="form-button" data-role="button" onclick="getLocationByZipcodeForSellForm(); return false;">
                        <span>更新</span>
                    </a>
                </div>
            </div>

            <div class="form-left">城市</div>
            <div class="form-right">
                <input readonly class="readonly" data-role="none" name="city_name" id="sell_form_city_name" data-rule-required="true" data-rule-content="true" data-msg-required="输入zipcode并按修改"></input>
            </div>

            <!-- TODO: set up {{post.item_condition.value}} -->
            <div id="prefer-contact" class="form-left">新旧度</div>
                <div class="form-right">
                    <div class="ui-grid-c">
                        <div class="ui-block-a form-cond" onclick="chooseCondition(0);">
                            <span id="condition-0-desc">新</span>
                            <div>
                                <img class="form-cond-img" id="condition-0-img" src="/static/images/sell_post/new.png">
                            </div>
                        </div>
                        <div class="ui-block-b form-cond" onclick="chooseCondition(1);">
                            <span id="condition-1-desc">九成新</span>
                            <div>
                                <img class="form-cond-img" id="condition-1-img" src="/static/images/sell_post/90-new.png">
                            </div>
                        </div>
                        <div class="ui-block-c form-cond" onclick="chooseCondition(2);">
                            <span id="condition-2-desc">七成新</span>
                            <div>
                                <img class="form-cond-img" id="condition-2-img" src="/static/images/sell_post/70-new.png">
                            </div>
                        </div>
                        <div class="ui-block-d form-cond" onclick="chooseCondition(3);">
                            <span id="condition-3-desc">旧</span>
                            <div>
                                <img class="form-cond-img" id="condition-3-img" src="/static/images/sell_post/used.png">
                            </div>
                        </div>
                    </div>
                </div>
            <input type="hidden" id="condition-slider" value="0" />


                <!--div class="ui-grid-solo ui-corner-all">
                    <div style="position: relative; margin: 5px 30px 30px 10px">
                        <div class="slider-scale-common slider-scale-div1">全新</div>
                        <div class="slider-scale-common slider-scale-div2">九成新</div>
                        <div class="slider-scale-common slider-scale-div3">七成新</div>
                        <div class="slider-scale-common slider-scale-div4">五成新</div>
                        <div class="slider-scale-common slider-scale-div5">旧</div>
                    </div>
                    <input data-highlight="true" type="range" name="condition-slider" id="condition-slider" value="{{post.item_condition.value}}" min="0" max="4" step="1" />
                </div-->

            <div class="form-left">联系方式</div>
            <div class="form-right">
                <div class="ui-grid-b">
                    <div class="ui-block-a">
                        <img class="contact-icon" id="email-icon" onclick="clickEmailContact();" src="/static/images/general/email_icon.png" />
                        <img class="contact-icon hide" id="email-icon-clicked" onclick="clickEmailContact();" src="/static/images/general/email_icon_clicked.png" />
                    </div>
                    <div class="ui-block-b">
                        <img class="contact-icon" id="phone-icon" onclick="clickPhoneContact();" src="/static/images/general/phone_icon.png" />
                        <img class="contact-icon hide" id="phone-icon-clicked" onclick="clickPhoneContact();" src="/static/images/general/phone_icon_clicked.png" />
                    </div>
                    <div class="ui-block-c">
                        <img class="contact-icon" id="sms-icon" onclick="clickSmsContact();" src="/static/images/general/sms_icon.png" />
                        <img class="contact-icon hide" id="sms-icon-clicked" onclick="clickSmsContact();" src="/static/images/general/sms_icon_clicked.png" />
                    </div>
                </div>

                <input type="hidden" name="sms-checked" id="sms-checked" value="off"></input>
                <input type="hidden" name="phone-checked" id="phone-checked" value="off"></input>
                <input type="hidden" name="email-checked" id="email-checked" value="off"></input>

                <div id="email_div">
                {% if email_checked == 'on' %}
                    <input type="text" id="email" name="email" placeholder="{{email}}" value="{{email}}" data-rule-required="true" data-rule-content="true" data-msg-required="请输入email" />
                {% else %}
                    <input type="text" id="email" name="email" placeholder="Email" data-rule-required="true" data-rule-content="true" data-msg-required="请输入Email" />
                {% endif %}
                </div>
                <div id="phone_number_div">
                {% if phone_checked == 'on' or sms_checked == 'on' %}
                    <input type="text" id="phone_number" name="phone_number" placeholder="{{phone}}" value="{{phone}}" data-rule-required="true" data-rule-content="true" data-msg-required="请输入手机号码" />
                {% else %}
                    <input type="text" id="phone_number" name="phone_number" placeholder="手机号码" data-rule-required="true" data-rule-content="true" data-msg-required="请输入手机号码" />
                {% endif %}
                </div>
            </div>

            <!-- TODO: refresh word counter -->
            <div class="form-left">其他描述</div>
            <div class="form-right">
                <span id="lengthCounter">0/3000</span>
            </div>
            <div style="clear:both"></div>
            <div class="ui-grid-solo">
                <textarea name="content" id="content" style="padding: 8px;" placeholder="描述颜色、大小、形状、新旧等需求" data-rule-required="true" data-rule-content="true" data-msg-required="请输入详细描述" maxlength="3000" value="{{post.content}}">{{post.content}}</textarea>
            </div>

            <input type="image" value="Submit" id="submit_btn" src="https://s3-us-west-2.amazonaws.com/beike-s3/static/img/03/submit.png">
        </form>
    </div>

    {% include "footer.html" %}
</div>

</body>

</html>
